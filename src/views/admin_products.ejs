<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>商品管理 - 管理后台</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-4">
      <div class="mb-3 d-flex justify-content-between">
        <a href="/" class="btn btn-link">&larr; 返回前台</a>
        <div>
          <a href="/admin/orders" class="btn btn-outline-secondary">订单管理</a>
          <a href="/admin/customers" class="btn btn-outline-secondary">客户管理</a>
          <a href="/admin/logs" class="btn btn-outline-secondary">日志</a>
        </div>
      </div>
      <h1 class="mb-3">商品管理</h1>

      <h4>新增商品</h4>
      <form class="row g-2 mb-4" method="post" action="/admin/products/create">
        <div class="col-md-3">
          <input class="form-control" name="name" placeholder="名称" required />
        </div>
        <div class="col-md-3">
          <input
            class="form-control"
            name="description"
            placeholder="描述"
          />
        </div>
        <div class="col-md-2">
          <input
            class="form-control"
            name="price"
            type="number"
            step="0.01"
            placeholder="价格"
            required
          />
        </div>
        <div class="col-md-2">
          <input
            class="form-control"
            name="stock"
            type="number"
            placeholder="库存"
            required
          />
        </div>
        <div class="col-md-2">
          <button class="btn btn-primary w-100" type="submit">添加</button>
        </div>
      </form>

      <h4>商品列表</h4>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>ID</th>
            <th>名称</th>
            <th>描述</th>
            <th>价格</th>
            <th>库存</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(p => { %>
          <tr>
            <td><%= p.id %></td>
            <td>
              <form
                class="row g-1"
                method="post"
                action="/admin/products/<%= p.id %>/update"
              >
                <div class="col-md-2">
                  <input
                    class="form-control form-control-sm"
                    name="name"
                    value="<%= p.name %>"
                  />
                </div>
                <div class="col-md-3">
                  <input
                    class="form-control form-control-sm"
                    name="description"
                    value="<%= p.description %>"
                  />
                </div>
                <div class="col-md-2">
                  <input
                    class="form-control form-control-sm"
                    name="price"
                    type="number"
                    step="0.01"
                    value="<%= p.price %>"
                  />
                </div>
                <div class="col-md-2">
                  <input
                    class="form-control form-control-sm"
                    name="stock"
                    type="number"
                    value="<%= p.stock %>"
                  />
                </div>
                <div class="col-md-3 d-flex gap-1">
                  <button
                    class="btn btn-sm btn-success"
                    type="submit"
                  >
                    保存
                  </button>
              </form>
              <form
                method="post"
                action="/admin/products/<%= p.id %>/delete"
              >
                <button
                  class="btn btn-sm btn-danger"
                  type="submit"
                  onclick="return confirm('确认删除该商品？');"
                >
                  删除
                </button>
              </form>
                </div>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </body>
</html>


