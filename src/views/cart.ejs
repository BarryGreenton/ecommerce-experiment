<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>购物车 - 电子商务网站实验</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-4">
      <div class="mb-3">
        <a href="/" class="btn btn-link">&larr; 返回商品列表</a>
      </div>
      <h1 class="mb-3">购物车</h1>
      <% if (!items.length) { %>
      <p>购物车为空，去首页添加一些商品吧。</p>
      <% } else { %>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>商品</th>
            <th>单价</th>
            <th>数量</th>
            <th>小计</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <% items.forEach(item => { %>
          <tr>
            <td><%= item.product.name %></td>
            <td>￥<%= item.product.price.toFixed(2) %></td>
            <td><%= item.quantity %></td>
            <td>￥<%= item.amount.toFixed(2) %></td>
            <td>
              <form method="post" action="/cart/remove/<%= item.product.id %>">
                <button class="btn btn-sm btn-outline-danger" type="submit">
                  取消购买
                </button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
      <p class="fw-bold">合计：￥<%= total.toFixed(2) %></p>
      <form method="post" action="/checkout">
        <button class="btn btn-success" type="submit">去付款并生成订单</button>
      </form>
      <% } %>
    </div>
  </body>
</html>


